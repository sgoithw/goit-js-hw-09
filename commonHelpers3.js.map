{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  form: document.querySelector('.form'),\n};\n\nelements.form.addEventListener('submit', handleSubmit);\n\n/**\n * Handles the form submit\n * @param {*} event\n */\nfunction handleSubmit(event) {\n  event.preventDefault();\n  const { delay, step, amount } = Object.fromEntries(\n    new FormData(event.currentTarget)\n  );\n\n  const promises = [];\n  const submitBtn = event.currentTarget.elements.submit;\n  event.currentTarget.reset();\n  submitBtn.disabled = true;\n\n  for (let i = 1; i <= amount; i += 1) {\n    promises.push(\n      createPromise(i, step * (i - 1) + parseInt(delay)).then(\n        onResolve,\n        onReject\n      )\n    );\n  }\n\n  Promise.allSettled(promises).then(() => {\n    submitBtn.disabled = false;\n  });\n}\n\n/**\n * On promise resolve\n * @param {*} position\n * @param {*} delay\n */\nfunction onResolve([position, delay]) {\n  iziToast.show({\n    position: 'topRight',\n    color: 'green',\n    message: `✅ Fulfilled promise ${position} in ${delay}ms`,\n  });\n}\n\n/**\n * On promise reject\n * @param {*} position\n * @param {*} delay\n */\nfunction onReject([position, delay]) {\n  iziToast.show({\n    position: 'topRight',\n    color: 'red',\n    message: `❌ Rejected promise ${position} in ${delay}ms`,\n  });\n}\n\n/**\n * Creates a promise that resolves or rejects\n * after the delay\n *\n * @param {integer} position\n * @param {integer} delay\n * @returns\n */\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve([position, delay]);\n      } else {\n        reject([position, delay]);\n      }\n    }, delay);\n  });\n}\n"],"names":["elements","handleSubmit","event","delay","step","amount","promises","submitBtn","i","createPromise","onResolve","onReject","position","iziToast","shouldResolve","resolve","reject"],"mappings":"wIAIA,MAAMA,EAAW,CACf,KAAM,SAAS,cAAc,OAAO,CACtC,EAEAA,EAAS,KAAK,iBAAiB,SAAUC,CAAY,EAMrD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpB,KAAM,CAAE,MAAAC,EAAO,KAAAC,EAAM,OAAAC,CAAQ,EAAG,OAAO,YACrC,IAAI,SAASH,EAAM,aAAa,CACpC,EAEQI,EAAW,CAAA,EACXC,EAAYL,EAAM,cAAc,SAAS,OAC/CA,EAAM,cAAc,QACpBK,EAAU,SAAW,GAErB,QAASC,EAAI,EAAGA,GAAKH,EAAQG,GAAK,EAChCF,EAAS,KACPG,EAAcD,EAAGJ,GAAQI,EAAI,GAAK,SAASL,CAAK,CAAC,EAAE,KACjDO,EACAC,CACD,CACP,EAGE,QAAQ,WAAWL,CAAQ,EAAE,KAAK,IAAM,CACtCC,EAAU,SAAW,EACzB,CAAG,CACH,CAOA,SAASG,EAAU,CAACE,EAAUT,CAAK,EAAG,CACpCU,EAAS,KAAK,CACZ,SAAU,WACV,MAAO,QACP,QAAS,uBAAuBD,QAAeT,KACnD,CAAG,CACH,CAOA,SAASQ,EAAS,CAACC,EAAUT,CAAK,EAAG,CACnCU,EAAS,KAAK,CACZ,SAAU,WACV,MAAO,MACP,QAAS,sBAAsBD,QAAeT,KAClD,CAAG,CACH,CAUA,SAASM,EAAcG,EAAUT,EAAO,CACtC,MAAMW,EAAgB,KAAK,OAAM,EAAK,GACtC,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtC,WAAW,IAAM,CACXF,EACFC,EAAQ,CAACH,EAAUT,CAAK,CAAC,EAEzBa,EAAO,CAACJ,EAAUT,CAAK,CAAC,CAE3B,EAAEA,CAAK,CACZ,CAAG,CACH"}